<html><head><link rel="import" href="../polymer/polymer-element.html"><link rel="import" href="calendar-element.html"><link rel="import" href="time-element.html"></head><body><dom-module id="datetime-picker"><template><style>:host{display:inline-flex;outline:none;box-sizing:border-box;position:relative;--calendar-icon:{padding:0.5em;height:1em;will-change:background-color;transition:background-color 150ms cubic-bezier(0.6, 1, 0.2, 1);cursor:pointer;fill:currentColor;};}:host > *{position:relative;}.backdrop{position:absolute;opacity:0;will-change:opacity;transition:opacity 150ms cubic-bezier(0.6, 1, 0.2, 1);pointer-events:none;@apply --calendar-element;}.backdrop[opened]{opacity:1;z-index:1;pointer-events:all;}:host([position="top"]) .backdrop{top:0;left:0;transform:translateY(-100%);}:host([position="bottom"]) .backdrop{bottom:0;left:0;transform:translateY(100%);}:host([position="left"]) .backdrop{top:0;left:0;transform:translateX(-100%);}:host([position="right"]) .backdrop{top:0;right:0;transform:translateX(100%);}:host([position="center"]) .backdrop{top:50%;left:50%;transform:translate(-50%, -50%);}.input{position:relative;box-sizing:content-box;padding:0.4em 0.2em;font-family:inherit;font-size:0.75em;text-align:center;@apply --datetime-picker-input;}</style><div><input id="date" class="input" type="date" disabled$="[[disabled]]" min="[[min]]" max="[[max]]" autocomplete="off" value="{{date::input}}" on-click="toggleCalendarElement"><template is="dom-if" if="[[!_useNative]]"><calendar-element class="backdrop" date="{{date}}" min="{{min}}" max="{{max}}" opened$="{{calendarOpened}}" closable=""></calendar-element></template></div><div><input id="time" class="input" type="time" disabled$="[[disabled]]" autocomplete="off" value="{{time::input}}" step="1" on-click="toggleTimeElement"><template is="dom-if" if="[[!_useNative]]"><time-element class="backdrop" time="{{time}}" opened$="{{timeOpened}}" closable=""></time-element></template></div></template><script>var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_get=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(e===void 0){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var DatetimePicker=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return _inherits(b,a),_createClass(b,[{key:"connectedCallback",value:function(){_get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"connectedCallback",this).call(this),this._nativeDateTime="date"!==this.$.date.type||"time"!==this.$.time.type?!1:!0,document.addEventListener("keydown",this._onKeyDown.bind(this),!1)}},{key:"disconnectedCallback",value:function(){_get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"disconnectedCallback",this).call(this)}},{key:"_setInputTypes",value:function(a){a?(this.$.date.type="date",this.$.time.type="time"):(this.$.date.type="text",this.$.time.type="text")}},{key:"_computeValue",value:function(a){if(a){var b=+new Date(a);b&&b!==this.value&&this.set("value",b)}}},{key:"_computeDatetime",value:function(a,b){return a&&b?a+" "+b:""}},{key:"_valueChanged",value:function(a){if(a){var b=new Date(a),c=new Date(this.datetime),d=this._toDate(b),e=this._toTime(b);d!==this._toDate(c)&&this.set("date",d),e!==this._toTime(c)&&this.set("time",e)}}},{key:"_toDate",value:function(a){return a.getFullYear()+"-"+this._pad(a.getMonth()+1)+"-"+this._pad(a.getDate())}},{key:"_toTime",value:function(a){return this._pad(a.getHours())+":"+this._pad(a.getMinutes())+":"+this._pad(a.getSeconds())}},{key:"_pad",value:function(a){return 10>a?"0"+a:""+a}},{key:"toggle",value:function(a){this.toggleCalendarElement(a),this.toggleTimeElement(a)}},{key:"open",value:function(a){this.openCalendarElement(a),this.openTimeElement(a)}},{key:"close",value:function(a){this.closeCalendarElement(a),this.closeTimeElement(a)}},{key:"toggleCalendarElement",value:function(a){this.calendarOpened&&!this.timeOpened?this.closeCalendarElement(a):this.openCalendarElement(a)}},{key:"openCalendarElement",value:function(a){this._useNative?a&&a.target&&a.target!==this.$.calendar&&this._dispathClickEvent.call(this.$.calendar):(this.calendarOpened=!0,this.timeOpened=!1)}},{key:"closeCalendarElement",value:function(){this._useNative||(this.calendarOpened=!1)}},{key:"toggleTimeElement",value:function(a){!this.calendarOpened&&this.timeOpened?this.closeTimeElement(a):this.openTimeElement(a)}},{key:"openTimeElement",value:function(a){this._useNative?a&&a.target&&a.target!==this.$.time&&this._dispathClickEvent.call(this.$.time):(this.calendarOpened=!1,this.timeOpened=!0)}},{key:"closeTimeElement",value:function(){this._useNative||(this.timeOpened=!1)}},{key:"_onKeyDown",value:function(a){a&&27===a.keyCode&&this.close()}},{key:"_dispathClickEvent",value:function(){this.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}))}},{key:"_computeUseNative",value:function(a,b){return a&&!b}}],[{key:"is",get:function(){return"datetime-picker"}},{key:"properties",get:function(){return{date:{type:String,notify:!0},time:{type:String,notify:!0},datetime:{type:String,computed:"_computeDatetime(date, time)"},value:{type:Number,notify:!0},min:{type:String},max:{type:String},position:{type:String,value:"top",reflectToAttribute:!0},useNotNative:{type:Boolean,value:!1},disabled:{type:Boolean},timeOpened:{type:Boolean},calendarOpened:{type:Boolean},_nativeDateTime:{type:Boolean},_useNative:{type:Boolean,computed:"_computeUseNative(_nativeDateTime, useNotNative)"}}}},{key:"observers",get:function(){return["_computeValue(datetime)","_valueChanged(value)","_setInputTypes(_useNative)"]}}]),b}(Polymer.Element);window.customElements.define(DatetimePicker.is,DatetimePicker);</script></dom-module></body></html>