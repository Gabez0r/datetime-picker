<html><head><link rel="import" href="../polymer/polymer-element.html"><link rel="import" href="calendar-element.html"><link rel="import" href="time-element.html"></head><body><dom-module id="datetime-picker"><template><style>:host{display:inline-flex;outline:none;box-sizing:border-box;position:relative;--calendar-icon:{padding:0.5em;height:1em;will-change:background-color;transition:background-color 150ms cubic-bezier(0.6, 1, 0.2, 1);cursor:pointer;fill:currentColor;};}:host > *{position:relative;}.backdrop{position:absolute;opacity:0;will-change:opacity;transition:opacity 150ms cubic-bezier(0.6, 1, 0.2, 1);pointer-events:none;@apply --calendar-element;}.backdrop[opened]{opacity:1;z-index:1;pointer-events:all;}:host([position="top"]) .backdrop{top:0;left:0;transform:translateY(-100%);}:host([position="bottom"]) .backdrop{bottom:0;left:0;transform:translateY(100%);}:host([position="left"]) .backdrop{top:0;left:0;transform:translateX(-100%);}:host([position="right"]) .backdrop{top:0;right:0;transform:translateX(100%);}:host([position="center"]) .backdrop{top:50%;left:50%;transform:translate(-50%, -50%);}.input{position:relative;box-sizing:content-box;padding:0.4em 0.2em;font-family:inherit;font-size:0.75em;text-align:center;@apply --datetime-picker-input;}</style><div><input id="date" class="input" type="date" disabled$="[[disabled]]" min="[[min]]" max="[[max]]" autocomplete="off" value="{{date::input}}" on-click="toggleCalendarElement"><template is="dom-if" if="[[!_useNative]]"><calendar-element class="backdrop" date="{{date}}" min="{{min}}" max="{{max}}" opened$="{{calendarOpened}}" closable=""></calendar-element></template></div><div><input id="time" class="input" type="time" disabled$="[[disabled]]" autocomplete="off" value="{{time::input}}" step="1" on-click="toggleTimeElement"><template is="dom-if" if="[[!_useNative]]"><time-element class="backdrop" time="{{time}}" opened$="{{timeOpened}}" closable=""></time-element></template></div></template><script>class DatetimePicker extends Polymer.Element{static get is(){return'datetime-picker'}static get properties(){return{date:{type:String,notify:!0},time:{type:String,notify:!0},datetime:{type:String,computed:'_computeDatetime(date, time)'},value:{type:Number,notify:!0},min:{type:String,notify:!0},max:{type:String,notify:!0},position:{type:String,value:'top',reflectToAttribute:!0},useNotNative:{type:Boolean,value:!1},disabled:{type:Boolean},timeOpened:{type:Boolean},calendarOpened:{type:Boolean},_nativeDateTime:{type:Boolean},_useNative:{type:Boolean,computed:'_computeUseNative(_nativeDateTime, useNotNative)'}}}static get observers(){return['_computeValue(datetime)','_valueChanged(value)','_setInputTypes(_useNative)']}connectedCallback(){super.connectedCallback(),this._nativeDateTime='date'!==this.$.date.type||'time'!==this.$.time.type?!1:!0,document.addEventListener('keydown',this._onKeyDown.bind(this),!1)}disconnectedCallback(){super.disconnectedCallback()}_setInputTypes(a){a?(this.$.date.type='date',this.$.time.type='time'):(this.$.date.type='text',this.$.time.type='text')}_computeValue(a){if(a){const b=+new Date(a);b&&b!==this.value&&this.set('value',b)}}_computeDatetime(a,b){return a&&b?a+' '+b:''}_valueChanged(a){if(a){const b=new Date(a),c=new Date(this.datetime),d=this._toDate(b),e=this._toTime(b);d!==this._toDate(c)&&this.set('date',d),e!==this._toTime(c)&&this.set('time',e)}}_toDate(a){return a.getFullYear()+'-'+this._pad(a.getMonth()+1)+'-'+this._pad(a.getDate())}_toTime(a){return this._pad(a.getHours())+':'+this._pad(a.getMinutes())+':'+this._pad(a.getSeconds())}_pad(a){return 10>a?'0'+a:''+a}toggle(a){this.toggleCalendarElement(a),this.toggleTimeElement(a)}open(a){this.openCalendarElement(a),this.openTimeElement(a)}close(a){this.closeCalendarElement(a),this.closeTimeElement(a)}toggleCalendarElement(a){this.calendarOpened&&!this.timeOpened?this.closeCalendarElement(a):this.openCalendarElement(a)}openCalendarElement(a){this._useNative?a&&a.target&&a.target!==this.$.calendar&&this._dispathClickEvent.call(this.$.calendar):(this.calendarOpened=!0,this.timeOpened=!1)}closeCalendarElement(){this._useNative||(this.calendarOpened=!1)}toggleTimeElement(a){!this.calendarOpened&&this.timeOpened?this.closeTimeElement(a):this.openTimeElement(a)}openTimeElement(a){this._useNative?a&&a.target&&a.target!==this.$.time&&this._dispathClickEvent.call(this.$.time):(this.calendarOpened=!1,this.timeOpened=!0)}closeTimeElement(){this._useNative||(this.timeOpened=!1)}_onKeyDown(a){a&&27===a.keyCode&&this.close()}_dispathClickEvent(){this.dispatchEvent(new MouseEvent('click',{view:window,bubbles:!1,cancelable:!0}))}_computeUseNative(a,b){return a&&!b}}window.customElements.define(DatetimePicker.is,DatetimePicker);</script></dom-module></body></html>