<html><head><link rel="import" href="../polymer/polymer-element.html"></head><body><dom-module id="calendar-element"><template strip-whitespace=""><style>:host{display:inline-block;font-family:inherit;background-color:var(--calendar-background, #252525);color:var(--calendar-color, #ccc);-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;outline-width:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;--calendar-selected:var(--primary-color, #253EEC);padding:6px;@apply --calendar-element;}:host > *{position:relative;}#top{width:100%;display:inline-flex;flex-direction:row;align-items:center;font-size:1em;}.view{flex:1;display:inline-flex;flex-direction:row;align-items:center;justify-content:center;cursor:pointer;}#calendar{display:table;}#header{display:table-header-group;}#dates{display:table-row-group;}.week{font-size:0.8em;display:table-row;}.day{display:table-cell;padding:0.5ch;margin:0;min-width:3ch;height:3ch;box-sizing:content-box;line-height:3ch;text-align:center;border-radius:50%;border-style:solid;border-width:1px;border-color:transparent;@apply --calendar-date-cell;}#dates .day:hover{border-color:rgba(255, 255, 255, 0.25);}.day.notinmonth{opacity:0.5;}.day.selected{background-color:var(--calendar-selected);border-color:transparent !important;}.day.current{border-style:solid;border-width:thin;border-color:var(--calendar-selected) !important;}.day.outofrange{opacity:0.15;font-style:italic;pointer-events:none;}.day,
      .button{cursor:pointer;will-change:background-color;transition:background-color 150ms cubic-bezier(0.6, 1, 0.2, 1);fill:currentColor;}.button{height:1em;padding:0.5em;@apply --calendar-button;}.button:hover{background-color:var(--calendar-selected);}#viewMonth{float:left;margin-right:0.3em;}#viewYear{float:left;font-weight:bold;}input::-webkit-input-placeholder{color:currentColor;}#icon{@apply --calendar-icon;}#icon:hover{background-color:var(--calendar-selected);}</style><div id="top"><svg class="button" on-mousedown="_prevMonth" on-touchstart="_prevMonth" on-mouseup="_cancelTimeout" on-touchend="_cancelTimeout" aria-label="previous" viewBox="0 0 24 24"><g><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></g></svg><section class="view" on-click="_jumpToNow"><div id="viewMonth"></div><div id="viewYear"></div></section><svg class="button" on-mousedown="_nextMonth" on-touchstart="_nextMonth" on-mouseup="_cancelTimeout" on-touchend="_cancelTimeout" aria-label="next" viewBox="0 0 24 24"><g><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g></svg> <svg id="icon" hidden$="[[!closable]]" viewBox="0 0 24 24" on-click="close"><g><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g></svg></div><div id="calendar"><div id="header"><div id="caption" class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div></div><div id="dates" on-click="_onClick"><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div></div></div></template><script>class CalendarElement extends Polymer.Element{static get is(){return'calendar-element'}static get properties(){return{opened:{type:Boolean,notify:!0,reflectToAttribute:!0},closable:{type:Boolean,notify:!0,reflectToAttribute:!0},date:{type:String,notify:!0,observer:'_dateChanged'},min:{type:String,notify:!0,observer:'_minChanged'},max:{type:String,notify:!0,observer:'_maxChanged'},viewDate:{type:Number,observer:'render'},locale:{type:String,value:window.navigator.language,observer:'_localeChanged'}}}connectedCallback(){super.connectedCallback(),setTimeout(()=>{const a=this.date?new Date(this.date):new Date;this.date=this._toDate(a.getFullYear(),a.getMonth(),a.getDate())},0)}_dateChanged(a){const b=new Date(a),c=this.min?new Date(this.min):void 0,e=this.max?new Date(this.max):void 0;!b||c&&c>b||e&&e<b?this.set('date',null):this.set('date',this._toDate(b)),this.set('viewDate',+new Date(b.getFullYear(),b.getMonth())),this.render()}_pad(a){return 10>a?'0'+a:''+a}_onClick(a){if(a){const b=a.path||[a.target];for(let a=0;a<b.length;a++)if(b[a].dataset&&b[a].dataset.date){this._prevSelected&&this._prevSelected.classList.remove('selected'),b[a].classList.add('selected'),this.date=b[a].dataset.date,this._prevSelected=b[a];break}}}_jumpToNow(){const a=new Date;this.viewDate=+new Date(a.getFullYear(),a.getMonth())}_prevMonth(){this._cancelTimeout(),this._incremMonth(-1),this._activeJob=setInterval(()=>{this._incremMonth(-1)},200)}_nextMonth(){this._cancelTimeout(),this._incremMonth(1),this._activeJob=setInterval(()=>{this._incremMonth(1)},200)}_incremMonth(a){const b=new Date(this.viewDate);b&&(this.viewDate=+new Date(b.getFullYear(),b.getMonth()+a))}_cancelTimeout(){this._activeJob&&clearInterval(this._activeJob)}_localeChanged(){let a,b=new Date(this.viewDate);b&&(this.$.viewMonth.textContent=b.toLocaleDateString(this.locale,{month:'long'}),this.$.viewYear.textContent=b.toLocaleDateString(this.locale,{year:'numeric'}));for(let c=0;7>c;c++)b=new Date(0,0,c),a=(b.getDay()-1+7)%7,this.$.caption.children[a]&&(this.$.caption.children[a].textContent=b.toLocaleDateString(this.locale,{weekday:'short'}))}render(){var a=Math.ceil,b=Math.floor;if(!this.viewDate)return;const c=new Date(this.viewDate);this.$.viewMonth.textContent=c.toLocaleDateString(this.locale,{month:'long'}),this.$.viewYear.textContent=c.toLocaleDateString(this.locale,{year:'numeric'});let d,e,f,g,h,k,l;k=c.getFullYear(),l=c.getMonth(),f=b(new Date(k,l,1).getTime()/865E5),e=a(new Date().getTime()/865E5)-f,this.date&&(d=a(new Date(this.date).getTime()/865E5)-f),this.min&&(g=a(+new Date(this.min).getTime()/865E5)-f),this.max&&(h=b(+new Date(this.max).getTime()/865E5)-f);const m=+new Date(k,l,0).getDate(),n=+new Date(k,l+1,0).getDate(),i=+new Date(k,l,1).getDay()-1;let o=-(7+i)+1;for(let a=0;a<this.$.dates.children.length;a++)for(let b=0;b<this.$.dates.children[a].children.length;b++)0>=o?(this.$.dates.children[a].children[b].classList.add('notinmonth'),this.$.dates.children[a].children[b].textContent=m+o):o>n?(this.$.dates.children[a].children[b].classList.add('notinmonth'),this.$.dates.children[a].children[b].textContent=o-n):(this.$.dates.children[a].children[b].classList.remove('notinmonth'),this.$.dates.children[a].children[b].textContent=o),void 0!==d&&o===d?this.$.dates.children[a].children[b].classList.add('selected'):this.$.dates.children[a].children[b].classList.remove('selected'),o===e?this.$.dates.children[a].children[b].classList.add('current'):this.$.dates.children[a].children[b].classList.remove('current'),void 0!==g&&o<g||void 0!==h&&o>h?this.$.dates.children[a].children[b].classList.add('outofrange'):this.$.dates.children[a].children[b].classList.remove('outofrange'),this.$.dates.children[a].children[b].dataset.date=this._toDate(k,l,o),o++}_toDate(){let a,b=arguments[0],c=arguments[1],d=arguments[2];if(void 0!==d)a=new Date(b,c,d);else if(void 0!==c)a=new Date(b,c);else if(void 0!==b)a=new Date(b);else return;return b=a.getFullYear(),c=this._pad(a.getMonth()+1),d=this._pad(a.getDate()),b+'-'+c+'-'+d}_minChanged(a){if(a){const b=+new Date(a);b?this.render():this.min=void 0}}_maxChanged(a){if(a){const b=+new Date(a);b?this.render():this.max=void 0}}toggle(){this.opened=!this.opened}open(){this.opened=!0}close(){this.opened=!1}}window.customElements.define(CalendarElement.is,CalendarElement);</script></dom-module></body></html>