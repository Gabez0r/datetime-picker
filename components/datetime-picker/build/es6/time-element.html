<html><head><link rel="import" href="../polymer/polymer-element.html"></head><body><dom-module id="time-element"><template strip-whitespace=""><style>:host{display:inline-block;font-family:inherit;background-color:var(--calendar-background, #252525);color:var(--calendar-color, #ccc);-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;outline-width:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;--calendar-selected:var(--primary-color, #253EEC);font-size:0.8em;padding:6px;@apply --calendar-element;}:host > *{position:relative;}#content{width:100%;display:inline-flex;flex-direction:row;align-items:center;justify-content:center;}#content > *{position:relative;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:center;}.button{cursor:pointer;will-change:background-color;transition:background-color 150ms cubic-bezier(0.6, 1, 0.2, 1);color:inherit;fill:currentColor;height:1.75em;width:100%;@apply --calendar-time-button;}.button:hover{cursor:pointer;background-color:var(--calendar-selected);}input.time{border-radius:2px;-moz-appearance:textfield;padding:0.25em;width:1.5em;height:1.5em;outline:none;font-family:inherit;text-align:center;border:none;background-color:var(--calendar-background, #333);color:inherit;@apply --calendar-time;}input.time::-webkit-outer-spin-button,
      input.time::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}input::-webkit-input-placeholder{color:currentColor;}input.time:focus{background-color:var(--calendar-selected);}#icon{@apply --calendar-icon;}#icon:hover{background-color:var(--calendar-selected);}</style><div id="content"><div class="field"><svg class="button" viewBox="0 0 24 24" on-mousedown="_startIncrem" on-mouseup="_stopIncrem" on-touchstart="_startIncrem" on-touchend="_stopIncrem" for="hour" step="1"><g><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g></svg> <input class="time" id="hour" type="number" min="0" max="23" step="1" tabindex="0" on-keydown="_checkKeycode" value="{{hour::input}}" placeholder="00"> <svg class="button" viewBox="0 0 24 24" on-mousedown="_startIncrem" on-mouseup="_stopIncrem" on-touchstart="_startIncrem" on-touchend="_stopIncrem" for="hour" step="-1"><g><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g></svg></div>:<div class="field"><svg class="button" viewBox="0 0 24 24" on-mousedown="_startIncrem" on-mouseup="_stopIncrem" on-touchstart="_startIncrem" on-touchend="_stopIncrem" for="minute" step="1"><g><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g></svg> <input class="time" id="minute" type="number" min="0" max="59" step="1" tabindex="1" on-keydown="_checkKeycode" value="{{minute::input}}" placeholder="00"> <svg class="button" viewBox="0 0 24 24" on-mousedown="_startIncrem" on-mouseup="_stopIncrem" on-touchstart="_startIncrem" on-touchend="_stopIncrem" for="minute" step="-1"><g><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g></svg></div>:<div class="field"><svg class="button" viewBox="0 0 24 24" on-mousedown="_startIncrem" on-mouseup="_stopIncrem" on-touchstart="_startIncrem" on-touchend="_stopIncrem" for="second" step="1"><g><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g></svg> <input class="time" id="second" type="number" min="0" max="59" step="1" tabindex="2" on-keydown="_checkKeycode" value="{{second::input}}" placeholder="00"> <svg class="button" viewBox="0 0 24 24" for="second" step="-1" on-mousedown="_startIncrem" on-mouseup="_stopIncrem" on-touchstart="_startIncrem" on-touchend="_stopIncrem"><g><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g></svg></div><div><svg id="icon" hidden$="[[!closable]]" viewBox="0 0 24 24" on-click="close"><g><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g></svg></div></div></template><script>class TimeElement extends Polymer.Element{static get is(){return'time-element'}static get properties(){return{opened:{type:Boolean,notify:!0,reflectToAttribute:!0},closable:{type:Boolean,notify:!0,reflectToAttribute:!0},time:{type:String,notify:!0},hour:{type:Number,notify:!0},minute:{type:Number,notify:!0},second:{type:Number,notify:!0}}}static get observers(){return['_timeChanged(hour, minute, second)','_timeStringChanged(time)']}connectedCallback(){super.connectedCallback(),setTimeout(()=>{const a=new Date('1970-01-01 '+this.time),b=+a?a:new Date;this.time=this._pad(b.getHours())+':'+this._pad(b.getMinutes())+':'+this._pad(b.getSeconds())},0)}_pad(a){return 10>a?'0'+a:''+a}_timeChanged(a,b,c){if(void 0!==a&&void 0!==b&&void 0!==c){const d=this._checktime(this._pad(a)+':'+this._pad(b)+':'+this._pad(c));this.time!==d&&(this.time=d)}}_timeStringChanged(a){a=this._checktime(a||'00:00:00'),a=a.split(':').map(function(a){return parseInt(a)}),(a[0]!==this.hour||a[1]!==this.minute||a[2]!==this.second)&&this.setProperties({hour:a[0],minute:a[1],second:a[2]})}_checkKeycode(a){if(!a.target)return void(a&&a.preventDefault&&a.preventDefault());const b=39===a.keyCode?1:37===a.keyCode?-1:0;if(b){const c=['hour','minute','second'];let d;for(let b=0;b<c.length;b++)c[b]===a.target.id&&(d=b);return void this.$[c[(d+b+3)%3]].focus()}}_checktime(b){const c=b.split(':');let d,a='';return 3===c.length?(d=parseInt(c[0]),a+=isNaN(d)||0>d||23<d?'00:':this._pad(d)+':',d=parseInt(c[1]),a+=isNaN(d)||0>d||59<d?'00:':this._pad(d)+':',d=parseInt(c[2]),a+=isNaN(d)||0>d||59<d?'00':this._pad(d),a):'00:00:00'}_startIncrem(a){this._stopIncrem();const b=a.currentTarget||a.path[0],c=b.getAttribute('for'),d=parseInt(b.getAttribute('step'));this._increm(c,d),this._activeJob=setInterval(()=>{this._increm(c,d)},200)}_stopIncrem(){this._activeJob&&clearInterval(this._activeJob)}_increm(a,b){a&&b&&('hour'===a?this.set('hour',(parseInt(this.hour)+b+24)%24):'minute'===a||'second'===a?this.set(a,(parseInt(this[a])+b+60)%60):void 0)}toggle(){this.opened=!this.opened}open(){this.opened=!0}close(){this.opened=!1}}window.customElements.define(TimeElement.is,TimeElement);</script></dom-module></body></html>