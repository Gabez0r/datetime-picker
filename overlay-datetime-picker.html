<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="overlay-element.html">
<link rel="import" href="datetime-picker.html">


<dom-module id="overlay-datetime-picker">
  <script>
/**
 *   `overlay-datetime-picker` extends `datetime-picker` and create the polyfilled elements `time-element` and `calendar-element` in an `overlay-element`, that extends *IronOverlayBehavior* and will create some of its attribute-bindings. *IronOverlayBehavior* itself extends also *IronFitBehavior* and *IronResizableBehavior*. Styling the overlay is currently not possible.
 *
 *   ```html
 *   <overlay-datetime-picker value="{{value}}" use-not-native></overlay-datetime-picker>
 *   ```
 *
 *   @customElement
 *   @polymer
 *   @extends DatetimePicker
 *
 *   @demo demo/overlay.html
 */
    class OverlayDatetimePicker extends DatetimePicker { // eslint-disable-line no-undef

      static get is() {
        return 'overlay-datetime-picker';
      }

      static get calendarTemplate() {
        return `
          <overlay-element
            always-on-top="[[alwaysOnTop]]"
            with-backdrop="[[withBackdrop]]"
            no-cancel-on-outside-click="[[noCancelOnOutsideClick]]"
            no-cancel-on-esc-key="[[noCancelOnEscKey]]"
            no-overlap="[[noOverlap]]"
            dynamic-align="[[dynamicAlign]]"
            vertical-align="[[verticalAlign]]"
            horizontal-align="[[horizontalAlign]]"
            opened="{{calendarOpened}}">
            ${super.calendarTemplate}
          </overlay-element>
        `;
      }

      static get timeTemplate() {
        return `
          <overlay-element
            always-on-top="[[alwaysOnTop]]"
            with-backdrop="[[withBackdrop]]"
            no-cancel-on-outside-click="[[noCancelOnOutsideClick]]"
            no-cancel-on-esc-key="[[noCancelOnEscKey]]"
            no-overlap="[[noOverlap]]"
            dynamic-align="[[dynamicAlign]]"
            vertical-align="[[verticalAlign]]"
            horizontal-align="[[horizontalAlign]]"
            opened="{{timeOpened}}">
            ${super.timeTemplate}
          </overlay-element>
        `;
      }

      static get properties() {
        return {
          /**
           * Set to true to keep overlay always on top.
           */
          alwaysOnTop: {
            type: Boolean
          },
          /**
           * Will position the element around the positionTarget without overlapping it.
           */
          noOverlap: {
            type: Boolean,
            value: false
          },
          /**
           * Set to true to display a backdrop behind the overlay. It traps the focus
           * within the light DOM of the overlay.
           */
          withBackdrop: {
            type: Boolean,
            value: false
          },

          /**
           * Set to true to disable canceling the overlay by clicking outside it.
           */
          noCancelOnOutsideClick: {
            type: Boolean,
            value: false
          },
          /**
           * If true, it will use `horizontalAlign` and `verticalAlign` values as preferred alignment
           * and if there's not enough space, it will pick the values which minimize the cropping.
           */
          dynamicAlign: {
            type: Boolean,
            value: false
          }
        }
      }
    }

    window.customElements.define(OverlayDatetimePicker.is, OverlayDatetimePicker);

  </script>
</dom-module>
